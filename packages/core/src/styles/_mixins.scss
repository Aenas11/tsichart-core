@use "sass:list";
@use "sass:map";
@use "variables" as *;

// Helper function to get spacing value
@function spacing($key) {
    @return map.get($spacing, $key);
}

// Helper function to get size value
@function size($key) {
    @return map.get($sizes, $key);
}

// Helper function to get font size
@function font-size($key) {
    @return map.get($font-sizes, $key);
}

// Helper function to get border radius
@function radius($key) {
    @return map.get($border-radius, $key);
}

// Helper function to get z-index
@function z($key) {
    @return map.get($z-index, $key);
}

// Mixin for theme colors
@mixin theme-colors($theme-map) {
    $text: map.get($theme-map, text);
    $hover: map.get($theme-map, hover);
    $element: map.get($theme-map, element);
    $background: map.get($theme-map, background);
    $alt-element: map.get($theme-map, alt-element);
    $hover-text: map.get($theme-map, hover-text);
    $scrollbar: map.get($theme-map, scrollbar);

    // Base context menu colors
    .tsi-baseContextMenu {
        border-color: $hover-text;
        background-color: $element;
        box-shadow: $shadow-sm;

        >div {

            &:hover,
            &:focus {
                background-color: $hover;
            }
        }

        .tsi-break {
            border-top: 1px solid rgba($hover-text, 0.2);

            &:hover,
            &:focus {
                background-color: $element;
            }
        }
    }

    .tsi-searchInput {
        border: 1px solid $alt-element;

        &:focus {
            border: 1px solid $hover-text;
        }
    }

    .tsi-baseMono {
        background: $background;
    }

    // Chart-specific colors
    .yAxis,
    .xAxis {
        path {
            stroke: $text;
            stroke-width: 1px;
        }

        .tick {
            text {
                fill: $text;
                user-select: none;
            }

            line {
                stroke: $text;
            }
        }

        @media screen and (-ms-high-contrast: white-on-black) {
            path {
                stroke: $color-white;
            }

            .tick {
                text {
                    fill: $color-white;
                }

                line {
                    stroke: $color-white;
                }
            }
        }
    }

    .vHoverBox,
    .hHoverBox {
        fill: $element;
        stroke: $hover-text;
    }

    .tsi-resizeGutter {
        &.tsi-isDragging {
            background-color: $alt-element;
        }
    }

    // Scrollbar styling
    ::-webkit-scrollbar {
        height: spacing(lg);
        width: spacing(lg);
    }

    ::-webkit-scrollbar-track {
        background: none;

        &:hover {
            background: $background;
        }
    }

    ::-webkit-scrollbar-thumb {
        background: $scrollbar;
        border-radius: radius(lg);

        &:hover {
            background: $scrollbar;
        }
    }

    // Hover text elements
    .hHoverText {
        text-anchor: middle;
        font-size: font-size(xs);
    }

    .vHoverText {
        text-anchor: end;
        font-size: font-size(xs);
    }

    .hoverText {
        stroke: none;
        fill: $text;
    }

    .hHoverValueBar {
        stroke: $text;
        stroke-width: 4px;
    }

    // SVG elements
    .stacked g path {
        fill: $text;
        stroke-width: 1;
        pointer-events: all;
        stroke: none;
    }

    .stacked rect {
        cursor: pointer;
        fill: transparent;
        stroke-width: 1;
    }

    // Tooltips
    .tooltip {
        pointer-events: none;

        text {
            fill: $text;
            alignment-baseline: hanging;
        }

        rect {
            fill: $element;
            stroke: $hover-text;
        }

        .title {
            font-weight: bold;
            font-size: font-size(md);
        }

        .value {
            font-weight: lighter;
            font-size: font-size(sm);

            &.visibleValue {
                font-weight: bold;
            }
        }
    }

    // Buttons
    .tsi-primaryButton {
        color: $text;
        border-color: rgba($text, 0.8);
        background-color: $background;

        &:hover {
            background-color: $hover;
        }
    }

    // Chart value text box
    .tsi-chartValueTextBox {
        background-color: $element;
        border-color: $hover;
    }
}

// Mixin for focus styles
@mixin focus-ring($color: currentColor) {
    outline: 2px solid $color;
    outline-offset: 2px;
}

// Mixin for truncate text
@mixin truncate {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}